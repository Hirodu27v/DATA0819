Preparing Data - Data Integrity
このビデオでは「データの完全性」とは何か、またそれがなぜ大切なのかについてお話しします。
これはデータの分析あるいはクリーニングを行うにあたって非常に重要なことです。たとえ話をしましょう。
政府関係者に表を要求して、後でコンピュータで分析しようと思っているとこんなのやこんなのが送られてきます。
これらの違いについて説明しましょう。これは私たちの必要に沿った、データジャーナリズムのワークフローで役立つようには構造化されていないデータです。
こうした表はデータを合計する部分があって、サブカテゴリがあり、空白もあって色付けされています。
こうした要素は人間の可読性を高めるものです。同じく、空白があればデータを識別しやすいでしょう。
ここでは、全てがここにつながっていて、着色されたヘッダがここにあり、結合された列や合計もあります。これは分析のために集計されたテーブルです。
実際のところ、これはスクリーンや紙に印刷された人間のためのテーブルといえるでしょう。
これらのテーブルは、これらのレポートを生成した詳細なデータとともに表示されます。
ご覧になっているような報告書はピボットテーブルやPDFファイルのようによく知られているものですが、計算できないためにコンピュータ分析には全く役立ちません。
ここにあるのはポルトガル語で、月ごとにブラジルの治安についてまとめたものです。年はここ、そして別のタイプのデータはここにあります。
"n/d"というのは「該当なし」か「データなし」です。しかし、これは以前にお見せしたものとは全然違いますよね。
また、こちらのテーブルは近代オリンピック第一回大会のメダル表です。これはポルトガル語で金、銀、銅です。
年と都市や国、メダルの種類がここにあります。そう、これは機械で読み取ることができます。ソフトウェアで処理することも、人間が読むことも、コンピュータ解析にも適しています。
この二つのテーブルの違いは何でしょう？これはさっきのブラジルの治安のデータです。
基本的に聞こえるかもしれませんが、データ分析の上で大切なのはこの部分です。よく構造化されたテーブルは、列にも行にもそれぞれの欄に1種類のデータしかありません。
同じところに数字と文字だとか、都市と国が混在していないのです。ここには、主キーと呼ばれる青色のキーもあります。特定のレジスタに関連付けられている行番号です。
ここに列の名前があります。この列に何があるかを識別し、後で計算できるようにします。
例えば、ここの年の欄は1896年、国の欄にはポルトガル語でアメリカを意味する"Estados Unidos"があります。
一つの国、一つの都市、一つの年が収まっています。こちらをご覧ください。
このテーブルはブラジルのさまざまな空港を示していて、空港名の隣には州の略称が記されています。
トップには合計値があります。これはブラジルの航空便が遅延または欠航した数です。
１行目はたいてい、先ほどお話ししたようにここにあるデータは何かを説明する変数名です。合計値から手を付けて、空港名と州の略称を分割し、遅延と欠航の数値も分離することにしましょう。
繰り返しになりますが、データのタイプごとに一つの列を割り当てる必要があります。これは加除、平均、最大値を求めるなどの計算を行う際に列内に競合するデータを置かないためです。
もちろん重複した行を削除しなければなりません。誤字、脱字にも気を付けて。コンピュータにとっては「door」と「Door」は別物です。
データセットに含まれるすべての値に対して表記を統一することが大切です。全て大文字にするのであれ、小文字にするのであれ、基準を適用しなければならないのです。
" Door"のように文字の前に空白があったら、それは別物として認識されます。データをクリーニングする段階では全てのスペースを削除するとともに入力ミスを修正することが必要です。
１行目はたいてい列見出しになっています。生データに合計値などの集計データを含めることは避けた方がいいでしょう。これは、データを処理するソフトウェアを使えるようにするためです。
後から必要な計算式を適用することができるので、未加工のデータに混在させる必要がないのです。ふつうは合計値は全て削除します。
次にお見せするのは、データクリーニングの例です。これらの値を削除し、分析を行うためのクリーンなデータセットを作成する方法をお話しします。
最も一般的な（データセットの）形式は何でしょう。ほとんどの場合、それはCSVです。CSVはオープンフォーマットで、プレーンテキストであり、ほとんど全てのデータ処理アプリと互換性があります。
CSVはコンマで区切られた値を表します。他の区切り記号を使ったものにはTSVもあります。いずれにせよとても簡単に作成できます。
区切り文字には、コンマ、セミコロン、パイプと呼ばれるこのような文字、タブなどがあります。
Tabキーを押してスペースを入力したとき、通常、TSVファイルという名前を付けることになっています。
テキストエディタで名前を入力してコンマを入力するだけです。最初の行はふつう列見出しです。
そして新しい行はそのままデータセットやデータベースに反映されます。最初の値は最初のカラム、２番目の値は次のカラムに入力していきます。
そうしていくとこんな感じのものが出来上がります。このCSVコードはGoogleシートのような表計算ソフトで読み込むとそのまま表示されます。
そのため、CSVファイルでは１行ごとの要素の数をそろえることが大切です。このように七つの値をもつファイルなら、２行目にも七つの値が必要です。
値がなくても、空白であることを示すコンマを入れましょう。一般的な区切り文字はコンマ、セミコロン、パイプやタブです。
CSVファイルを作成するにあたって、全ての値をテキスト・エディタで入力する必要はありません。たいていのアプリケーションはCSVファイル形式でエクスポートしてくれるからです。
ただ、CSVファイルの区切り記号には注意してください。国によっては区切り記号が認識されないことがあります。たとえば米国ではコンマが一般的ですが、ブラジルではセミコロンが標準です。
あなたのケースでうまくいかなかったら、これもチェックしてみてください。
